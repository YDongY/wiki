---
title: MySQL 数据类型
description: 
published: true
date: 2021-03-24T15:24:17.737Z
tags: 
editor: markdown
dateCreated: 2021-03-24T15:23:48.349Z
---

![mysql数据类型.png](/assets/数据库/mysql/mysql数据类型.png)
# 1. 整数类型

对于整数类型最主要的就是了解 int(1)、int(4)、int(10) 中 1、4、10 所表示的含义。可能看上去感觉括号内的数值表示数据的位数，其实不然。

**Int(n) 括号内的 n 无论多大，都是占 4 个字节的空间，最多能存 10 位数（4294967295）。即 n 不是代表能存多少位数，只是显示宽度。**

举一个例子：

```sql
mysql> desc demo1;
+-------+--------------------------+------+-----+---------+-------+
| Field | Type                     | Null | Key | Default | Extra |
+-------+--------------------------+------+-----+---------+-------+
| id    | int(4) unsigned zerofill | YES  |     | NULL    |       |
+-------+--------------------------+------+-----+---------+-------+
1 row in set (0.00 sec)

mysql> select * from demo1;
+------+
| id   |
+------+
| 0001 |
| 0004 |
| 0010 |
+------+
3 rows in set (0.00 sec)
```

通过上面的例子可以看到，当 int(4) 类型中所有的数据都是 4 位的宽度，之所以显示 0001 而不显示 1 是因为定义了 zerofill 对剩余的位置用 0 填充。现在我们再把 int(4) 改成 int(10) 看一下效果：

```sql
mysql> select * from demo1;
+------------+
| id         |
+------------+
| 0000000001 |
| 0000000004 |
| 0000000010 |
+------------+
3 rows in set (0.00 sec)
```

看到所有的数据宽度都是 10 ，当然也可以超过 10 比如 int(20)，但是由于 int 类型限制对于无符号的整数最大为00000000004294967295，也就是前面十个 0 没有意义。

如果我们存储的数据宽度超过 int(4) 中的 4 会怎么样？

```sql
mysql> desc test;
+-------+--------------------------+------+-----+---------+-------+
| Field | Type                     | Null | Key | Default | Extra |
+-------+--------------------------+------+-----+---------+-------+
| id    | int(4) unsigned zerofill | YES  |     | NULL    |       |
+-------+--------------------------+------+-----+---------+-------+
1 row in set (0.00 sec)

mysql> select * from test;
+--------+
| id     |
+--------+
|   0123 |
| 123456 |
+--------+
1 row in set (0.00 sec)
```

可以看到虽然 int(4) 表示 4 位宽度，我们实际存储了宽度为 6 的数，仍然进行了存放，更进一步说明了括号内的数值并不能限制存储的位数，只是一种宽度表示方式。

# 2. 浮点数

对于浮点数类型有三种，一般不建议使用 float 和 double 类型，因为他们会丢失精度。更多是使用 Decimal 定点数

例如下面的精度为 5 ，小数部分为 2 的定点数：

```sql
mysql> desc demo1;
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| id    | decimal(5,2) | YES  |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+
1 row in set (0.00 sec)
```

往表里插入数据

```sql
mysql> insert into demo1(id) values(12.345);
Query OK, 1 row affected, 1 warning (0.09 sec)

mysql> insert into demo1(id) values(12.98765);
Query OK, 1 row affected, 1 warning (0.08 sec)

mysql> insert into demo1(id) values(12);
Query OK, 1 row affected (0.07 sec)

mysql> select * from demo1;
+-------+
| id    |
+-------+
| 12.35 |
| 12.99 |
| 12.00 |
+-------+
2 rows in set (0.00 sec)
```

可以看到，id 字段插入了长度为 5 的数字，但是小数位超过了 2 ，其并没有报错而是进行了四舍五入。如果我们插入的长度大于 5 的数字会把尾部多余的截取（MySQL 8.0 版本），并且进行四舍五入。如果没有指定小数位，会自动在末尾填充小数位个 0。

# 3. 日期类型

对于日期类型主要是区分 date、datetime、timestamp 三种类型。

```sql
mysql> create table test(date1 datetime,date2 timestamp,date3 date);
Query OK, 0 rows affected (0.48 sec)

mysql> insert into test values(current_date,current_timestamp,current_date);
Query OK, 1 row affected (0.12 sec)

mysql> select * from test;
+---------------------+---------------------+------------+
| date1               | date2               | date3      |
+---------------------+---------------------+------------+
| 2019-03-02 00:00:00 | 2019-03-02 14:26:01 | 2019-03-02 |
+---------------------+---------------------+------------+
1 row in set (0.00 sec)
```

可以看到 datetime 和 timestamp 可以精确到秒，date 只能精确到日。其次是 datetime 和 timestamp 的存储空间不同， datetime 占用 8 个字节，timestamp 占用 4 个字节，所以 timestamp 支持时间范围比较窄。

> MySQL 5.5 以后的版本支持 timestamp 和 datetime 的自动更新为当前时间

如果有的场景需求需要存储时间日期为 NULL ，官方推荐是虚拟日期 0000-00-00 00:00:00 代替

# 4. 字符串类型

字符串类型众多，而其中最主要最常用的就是 char 和 varchar。

- char 类型用于定长字符串，并且大小范围为 0~255，存储时如果字符数没有达到定义的位数，会在后面用空格补全存入数据库，如果超过指定长度大小，会被截断
- varchar 是变长长度，范围是 0~65535，存储时如果字符数没有达到定义的位数，不会补空格，如果超过指定长度大小，也会被截断

> 注意：使用 varchar 时和输入的字符数有关，当数据位占用的字节数小于 255 时，用 1 个字节来记录长度，数据位占用字节大于 255 时，用 2 个字节记录长度，还有一字节用来记录是否为 NULL 值。

例如：varchar(100) 里面的 100 表示字符数

- 在 UTF8 字符集下，存储空间为 `100*3+1 = 301` 字节
- 在 GBK 字符集下，存储空间为 `100*2+1=201` 字节

所以 varchar 最大字节数为 65535 ，使用 UTF8 字符集，每个字符最多占三个字节，最大长度不能超过 `(65535-1-2)/3=21844`。在 GBK 字符集下，最大长度不能超过 `(65535-1-2)/2 = 36766`

