---
title: MySQL 存储引擎
description: 
published: true
date: 2021-03-24T15:25:54.673Z
tags: 
editor: markdown
dateCreated: 2021-03-24T15:25:19.042Z
---

# 1. 存储引擎概述

存储引擎就是存储数据，建立索引，更新查询数据等技术的实现方式 。存储引擎是基于表的，而不是基于库的。 所以存储引擎也可被称为表类型。

# 2. 存储引擎分类

下面重点介绍几种常用的存储引擎并对比各个存储引擎之间的区别， 如下表所示 ：

| 特点         | InnoDB               | MyISAM   | MEMORY | MERGE | NDB  |
| ------------ | -------------------- | -------- | ------ | ----- | ---- |
| 存储限制     | 64TB                 | 有       | 有     | 没有  | 有   |
| 事务安全     | **支持**             |          |        |       |      |
| 锁机制       | **行锁(适合高并发)** | **表锁** | 表锁   | 表锁  | 行锁 |
| B树索引      | 支持                 | 支持     | 支持   | 支持  | 支持 |
| 哈希索引     |                      |          | 支持   |       |      |
| 全文索引     | 支持(5.6版本之后)    | 支持     |        |       |      |
| 集群索引     | 支持                 |          |        |       |      |
| 数据索引     | 支持                 |          | 支持   |       | 支持 |
| 索引缓存     | 支持                 | 支持     | 支持   | 支持  | 支持 |
| 数据可压缩   |                      | 支持     |        |       |      |
| 空间使用     | 高                   | 低       | N/A    | 低    | 低   |
| 内存使用     | 高                   | 低       | 中等   | 低    | 高   |
| 批量插入速度 | 低                   | 高       | 高     | 高    | 高   |
| 支持外键     | **支持**             |          |        |       |      |

> 在 MySQL 5.6 版本之前， 默认的存储引擎都是 MyISAM， 但 5.6 版本以后默认的存储引擎就是 InnoDB 了。

## 2.1 InnoDB

InnoDB 存储引擎是 Mysql 的默认存储引擎。InnoDB 存储引擎提供了具有提交、回滚、崩溃恢复能力的事务安全。但是对比 MyISAM 的存储引擎，InnoDB 写的处理效率差一些，并且会占用更多的磁盘空间以保留数据和索引。

MyISAM 与 InnoDB区别

|                | InnoDB                                                       | MyISAM                                                       |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 物理文件       | 每张表存放两个文件：<br>.frm 表结构定义<br>.ibd 数据与索引文件 | 每张表被存放在三个文件：<br>.frm 表格定义<br>.MYD(MYData) 数据文件<br>.MYI(MYIndex) 索引文件 |
| 记录存储顺序   | 按主键大小有序插入                                           | 按记录插入顺序保存                                           |
| 锁级别         | 行级锁定、表级锁定，锁定力度小并发能力高                     | 表锁                                                         |
| DQL            |                                                              | MyISAM 更优                                                  |
| DML            | InnoDB 更优                                                  |                                                              |
| 索引的实现方式 | B+树索引，Innodb 是索引组织表                                | B+树索引，MyISAM 是堆表                                      |
| 事务           | 支持                                                         | 不支持                                                       |

## 2.2 MEMORY

Memory 存储引擎将表的**数据存放在内存**中。每个 MEMORY 表实际对应一个磁盘文件，格式是`.frm` ，**该文件中只存储表的结构，而其数据文件，都是存储在内存中**，这样有利于数据的快速处理，提高整个表的效率。MEMORY 类型的表访问非常地快，因为他的数据是存放在内存中的，并且**默认使用 HASH 索引**，但是服务一旦关闭，表中的数据就会丢失。

将所有数据保存在 RAM 中，在需要快速定位记录和其他类似数据环境下，可以提供快速的访问。MEMORY 的缺陷就是对表的大小有限制，太大的表无法缓存在内存中，其次是要确保表的数据可以恢复，数据库异常终止后表中的数据是可以恢复的。MEMORY 表通常用于更新不太频繁的小表，用以快速得到访问结果。

## 2.3 MERGE

**MERGE 存储引擎是一组 MyISAM 表的组合**，这些 MyISAM 表必须结构完全相同，MERGE 表本身并没有存储数据，对MERGE 类型的表可以进行查询、更新、删除操作，这些操作实际上是对内部的 MyISAM 表进行的。
