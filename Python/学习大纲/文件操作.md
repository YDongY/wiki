---
title: 11. 文件操作
description: 
published: true
date: 2021-03-12T15:39:39.032Z
tags: 
editor: markdown
dateCreated: 2021-03-12T15:38:45.124Z
---

#  ⽂件的基本操作

## 打开

在 python，使⽤ open 函数，可以打开⼀个已经存在的⽂件，或者创建⼀个新⽂件，语法如下：

```
open(name, mode)
```
- name：是要打开的⽬标⽂件名的字符串(可以包含⽂件所在的具体路径)
- mode：设置打开⽂件的模式(访问模式)：只读、写⼊、追加等。

| 模 式 | 描述                                                         |
| ----- | ------------------------------------------------------------ |
| `r`   | 以只读⽅式打开⽂件。⽂件的指针将会放在⽂件的开头。这是**默认模式**。 |
| `rb`  | 以⼆进制格式打开⼀个⽂件⽤于只读。⽂件指针将会放在⽂件的开头。这是**默认模式** |
| `r+`  | 打开⼀个⽂件⽤于读写。⽂件指针将会放在⽂件的开头             |
| `rb+` | 以⼆进制格式打开⼀个⽂件⽤于读写。⽂件指针将会放在⽂件的开头 |
| `w`   | 打开⼀个⽂件只⽤于写⼊。如果该⽂件已存在则打开⽂件，并从开头开始编辑，即原有内容会被删除。如果该⽂件不存在，创建新⽂件 |
| `wb`  | 以⼆进制格式打开⼀个⽂件只⽤于写⼊。如果该⽂件已存在则打开⽂件，并从开头开始编辑，即原有内容会被删除。如果该⽂件不存在，创建新⽂件 |
| `w+`  | 打开⼀个⽂件⽤于读写。如果该⽂件已存在则打开⽂件，并从开头开始编辑，即原有内容会被删除。如果该⽂件不存在，创建新⽂件 |
| `wb`  | 以⼆进制格式打开⼀个⽂件⽤于读写。如果该⽂件已存在则打开⽂件，并从开头开始编辑，即原有内容会被删除。如果该⽂件不存在，创建新⽂件 |
| `a`   | 打开⼀个⽂件⽤于追加。如果该⽂件已存在，⽂件指针将会放在⽂件的结尾。也就是说，新的内容将会被写⼊到已有内容之后。如果该⽂件不存在，创建新⽂件进⾏写⼊ |
| `ab`  | 以⼆进制格式打开⼀个⽂件⽤于追加。如果该⽂件已存在，⽂件指针将会放在⽂件的结尾。也就是说，新的内容将会被写⼊到已有内容之后。如果该⽂件不存在，创建新⽂件进⾏写⼊ |
| `a+`  | 打开⼀个⽂件⽤于读写。如果该⽂件已存在，⽂件指针将会放在⽂件的结尾。⽂件打开时会是追加模式。如果该⽂件不存在，创建新⽂件⽤于读写 |
| `ab+` | 以⼆进制格式打开⼀个⽂件⽤于追加。如果该⽂件已存在，⽂件指针将会放在⽂件的结尾。如果该⽂件不存在，创建新⽂件⽤于读写 |

# ⽂件对象⽅法

## write()

```
对象对象.write('内容')
```

```python
# 1. 打开⽂件
f = open('test.txt', 'w')
# 2.⽂件写⼊
f.write('hello world')
# 3. 关闭⽂件
f.close()
```

> 注意：
> 1. w 和 a 模式：如果⽂件不存在则创建该⽂件；如果⽂件存在，w 模式先清空再写⼊，a 模式直接末尾追加。
> 2. r 模式：如果⽂件不存在则报错

## read()

```python
⽂件对象.read(num)
```

num 表示要从⽂件中读取的数据的⻓度（单位是字节），如果没有传⼊num，那么就表示读取⽂件中所有的数据

## readlines()

readlines 可以按照⾏的⽅式把整个⽂件中的内容进⾏⼀次性读取，并且返回的是⼀个列表，其中每⼀⾏的数据为⼀个元素

```python
f = open('test.txt')
content = f.readlines()
# ['hello world\n', 'abcdefg\n', 'aaa\n', 'bbb\n', 'ccc']
print(content)
# 关闭⽂件
f.close()
```

## readline()

readline() ⼀次读取⼀⾏内容

```python
f = open('test.txt')

content = f.readline()
print(f'第⼀⾏： {content}')

content = f.readline()
print(f'第⼆⾏： {content}')
# 关闭⽂件
f.close()
```

## seek()

⽤来移动⽂件指针

```
⽂件对象.seek(偏移量, 起始位置)
```

起始位置：

- 0：⽂件开头
- 1：当前位置
- 2：⽂件结尾


## close()

```
⽂件对象.close()
```

# ⽂件和⽂件夹的操作

在 Python 中⽂件和⽂件夹的操作要借助 os 模块⾥⾯的相关功能

```python
import os
os.函数名()
```

##  ⽂件重命名

```python
os.rename(⽬标⽂件名, 新⽂件名)
```

## 删除⽂件

```python
os.remove(⽬标⽂件名)
```

## 创建⽂件夹

```python
os.mkdir(⽂件夹名字)
```

## 删除⽂件夹

```python
os.rmdir(⽂件夹名字)
```

## 获取当前⽬录

```python
os.getcwd()
```

## 改变默认⽬录

```python
os.chdir(⽬录)
```

## 获取⽬录列表

```python
os.listdir(⽬录)
```

# 应⽤案例

需求：批量修改⽂件名，既可添加指定字符串，⼜能删除指定字符串

步骤：
1. 设置添加删除字符串的的标识
2. 获取指定⽬录的所有⽂件
3. 将原有⽂件名添加/删除指定字符串，构造新名字
4. os.rename()重命名

```python
import os
# 设置重命名标识：如果为1则添加指定字符， flag取值为2则删除指定字符
flag = 1

# 获取指定⽬录
dir_name = './'

# 获取指定⽬录的⽂件列表
file_list = os.listdir(dir_name)
# print(file_list)

# 遍历⽂件列表内的⽂件
for name in file_list:
	# 添加指定字符
	if flag == 1:
	new_name = 'Python-' + name

	# 删除指定字符
	elif flag == 2:
		num = len('Python-')
		new_name = name[num:]

	# 打印新⽂件名，测试程序正确性
	print(new_name)
	
  # 重命名
	os.rename(dir_name+name, dir_name+new_name)
```



