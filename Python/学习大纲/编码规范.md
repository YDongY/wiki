---
title: 2. 编码规范
description: 
published: true
date: 2021-03-12T12:48:50.347Z
tags: 
editor: markdown
dateCreated: 2021-03-12T12:27:20.053Z
---

# 为什么需要编码规范

编码规范往往和代码质量、可读性、可维护性，甚至软件的生命周期都有直接的关系，遵循编码规范，会给我们在代码的开发以及后期维护带来很多好处，包括但不限于以下几点：

1. 有助于增强代码的一致性和可读性（意思就是长了你自己的代码都不认识了）
2. 有助于提高代码的可维护性和代码质量（意思就是你自己写的代码自己可能都不想改了）
3. 有助于提高软件团队的开发和协作效率（意思就是别人更不想看你的代码）
4. 有助于提高项目和产品的交付质量（客户都看不下去了，你凉了）

> 总结一句话：无规矩不成方圆

# PEP 8

PEP 8 的英文全称为 Style Guide for Python Code ，即 Python 编码风格指南（或称规范），这份指南涵盖三个大的方面，代码布局、注释文档以及命名规范。其主要包括以下内容：

- 代码的整体布局，比如缩进、行最大长度、换行与空行、导入语句的位置及组织结构、编码声明、dunder 方法位置等；
- 代码中的引号以及空格、行尾部逗号；
- 复合语句的基本结构；
- 注释编写的基本规范，主要包括块注释、行内注释和文档字符串；
- 针对变量、方法、函数、类等元素的命名规范

> https://www.python.org/dev/peps/pep-0008/#code-lay-out
{.is-success}

## 代码布局

- 缩进与空格 / 制表符

```python
# 1. 使用括号内的隐式换行
def function_name(var_one, var_two, 
                  var_three, var_four):
    pass

# 2. 悬挂缩进
def function_name(
        var_one, var_two,
        var_three, var_four):
    print(var_one, var_two, var_three, var_four)  
    
# 3. 使用括号将条件部分包裹起来，在括号内进行换行。
if (condition_one
        and condition_two):
    pass

# 4. 括号与第一个字符对齐
two_list = [
    1, 2, 3,
    4, 5, 6
]
```

- 行最大长度

> 代码中所有行的最大长度应限制在 79 个字符以内，文档字符串和注释的最大长度应限制在 72 个字符以内

```python
# 当一个代码行的长度超过限制时应进行换行，换行应优先使用括号内隐式换行，其次才是使用反斜杠。

# 应优先使用括号内隐式换行
if (condition_one
        and condition_two):
    pass

# 不提倡下面的方式
if condition_one \
        and condition_two:
    pass
    
# 但在一下场景下，不能使用隐式换行，比如下面 with 中有多个语句时，可使用反斜杠。
with open(path_one) as file_one, \
        open(path_one) as file_two:
    pass
```

- 运算符与换行、代码之间的空行

```python
# 二元运算符之前换行
result = (var_one
          - var_two
          + (var_three * var_four)
          - var_five)
```

- 导入的组织

> 代码中有多个导入，组织导入的整体顺序应首先为标准库导入，接着是相关第三方库导入，最后是本地代码导入

```python
import asyncio
from concurrent import futures
import functools
import sys
import types

from tornado.log import app_log

import typing
from typing import Any, Callable, Optional, Tuple, Union
```

- 代码的编码声明

> 默认情况下，Python 源码文件的编码是 UTF-8

```python
# -*- coding: encoding -*-
# -*- coding: cp1252 -*-
```

- dunder 方法的位置














