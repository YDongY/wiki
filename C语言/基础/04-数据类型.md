---
title: 04-数据类型
description: 
published: true
<<<<<<< HEAD
date: 2021-02-21T13:34:50.066Z
tags: 
editor: undefined
dateCreated: 2021-02-21T08:35:50.221Z
=======
date: 2021-02-21T14:38:45.873Z
tags: 
editor: undefined
dateCreated: 2021-02-21T14:38:42.964Z
>>>>>>> docs: add all untracked content
---

# 数据类型

{{< details title="要点回顾：" open=true >}}

1. 数据类型长度
2. 类型定义，一般采用简写

short 类型通常为 16 位，long 类型通常为 32位，int 类型可以为 16 位或 32 位。各编译器可以根据硬件特性自主选择合适的类型长度，但要遵循下列限制： short 与 int 类型至少为 16 位， 而 long 类型至少为 32 位， 并且 short 类型不得长于 int 类型，int 类型不得长于 long 类型

{{< /details >}}

## 整型

<img style="height:250px;weigh:250px" src="/docs/C/Basics/04-整型.png"  alt="整型"/>

| 类型                 | 存储大小    | 值范围                                      |
| :------------------- | :---------- | :------------------------------------------ |
| `int`                | 2 或 4 字节 | -32768 - 32767 或 -2147483648  - 2147483647 |
| `unsigned int`       | 2 或 4 字节 | 0 - 65535 或 0 - 4294967295                 |
| `short`              | 2 字节      | -32768 - 32767                              |
| `unsigned short`     | 2 字节      | 0 - 65535                                   |
| `long`               | 4 字节      | -2147483648 - 2147483647                    |
| `unsigned long`      | 4 字节      | 0 - 4294967295                              |
| `long long`          | 8 字节      | -9223372036854775808 - 9223372036854775807  |
| `unsigned long long` | 8 字节      | 0 - 18446744073709551615                    |

### 有符号数

有符号数是最高位为符号位，0代表正数，1代表负数。

### 无符号数

无符号数最高位不是符号位，而就是数的一部分，无符号数不可能是负数。


| 打印格式          | 含义                                                    |     |
| ----------------- | ------------------------------------------------------- | --- |
| `%d`              | 输出一个有符号的 10 进制 int 类型                       |     |
| `%o`              | 输出 8 进制的 int 类型                                  |     |
| `%x`              | 输出 16 进制的 int 类型，字母小写                       |     |
| `%X`              | 输出 16 进制的 int 类型，字母大写                       |     |
| `%u`              | 输出 unsigned int 类型                                  |     |
| `%l` 或者 `%ll`   | 输出 long 类型 或者 输出 unsigned  long 类型            |     |
| `%lu` 或者 `%llu` | 输出 long  long 类型 或者 输出 unsigned long  long 类型 |     |
| `%hd` 或者 `%hu`  | 输出 short 类型 或者 输出 unsigned short 类型           |     |
| `%f`              | float 输出单精度浮点数                                  |     |
| `%lf`             | double 输出双精度浮点数                                 |     |
| `%e`或者`%E`      | double 科学计数法                                       |     |
| `%s`              | 字符串，输出字符串中的字符直到字符串中的空字符          |     |
| `%c`              | 字符型                                                  |     |
| `%p`              | 以 16 进制形式输出指针                                  |     |
| `%%`              | 输出一个百分号                                          |     |

## 字符型

### 字符变量的定义和输出

- 字符型变量用于存储一个单一字符，在 C 语言中用 char 表示，其中每个字符变量都会占用 1 个字节。
- 单引号(' ')把字符括起来

字符变量实际上并不是把该字符本身放到变量的内存单元中去，而是将该字符对应的 ASCII 编码放到变量的存储单元中。char 的本质就是一个 1 字节大小的整型。

### 字符变量输出

```c
#include <stdio.h>

int main(){
    char ch = 'a';
    printf("sizeof(ch) = %u\n", sizeof(ch));

    printf("ch[%%c] = %c\n", ch); // 打印字符
    printf("ch[%%d] = %d\n", ch); // 打印‘a’ ASCII的值

    char A = 'A';
    char a = 'a';
    printf("a = %d\n", a); // 97
    printf("A = %d\n", A); // 65

    printf("A = %c\n", 'a' - 32); // 小写a转大写A
    printf("a = %c\n", 'A' + 32); // 大写A转小写a

    ch = ' ';
    printf("空字符：%d\n", ch); // 空字符ASCII的值为32
    printf("A = %c\n", 'a' - ' '); // 小写a转大写A
    printf("a = %c\n", 'A' + ' '); // 大写A转小写a

    return 0;
}
```

### 字符变量输入

```c
#include <stdio.h>

int main(){
    char ch;
    printf("请输入ch的值：");

    // 不要加 “\n” 
    scanf("%c", &ch);
    printf("ch = %c\n", ch); //打印ch的字符

    return 0;
}
```

### 转义字符

| 转义字符 | 含义                                | ASCII码值（十进制） |
| -------- | ----------------------------------- | ------------------- |
| \a       | 警报                                | 007                 |
| \b       | 退格(BS) ，将当前位置移到前一列     | 008                 |
| \f       | 换页(FF)，将当前位置移到下页开头    | 012                 |
| \n       | 换行(LF) ，将当前位置移到下一行开头 | 010                 |
| \r       | 回车(CR) ，将当前位置移到本行开头   | 013                 |
| \t       | 水平制表(HT) （跳到下一个TAB位置）  | 009                 |
| \v       | 垂直制表(VT)                        | 011                 |
| \\\      | 代表一个反斜线字符"\\"              | 092                 |
| \\\'     | 代表一个单引号（撇号）字符          | 039                 |
| \\"      | 代表一个双引号字符                  | 034                 |
| \?       | 代表一个问号                        | 063                 |
| \0       | 数字0                               | 000                 |
| \ddd     | 8进制转义字符，d范围0~7             | 3 位 8 进制         |
| \xhh     | 16进制转义字符，h范围0~9，a~f，A~F  | 2 位 16 进制        |


```c
#include <stdio.h>

int main()
{
	printf("abc");
	printf("\refg\n"); // \r 切换到句首， \n 为换行键

	printf("abc");
	printf("\befg\n");// \b 为退格键， \n 为换行键

	printf("%d\n", '\123');// '\123'为 8 进制转义字符，0123 对应 10 进制数为 83
	printf("%d\n", '\x23');// '\x23'为 16 进制转义字符，0x23 对应 10 进制数为 35

	return 0;
}
```

### 数值溢出

当超过一个数据类型能够存放最大的范围时，数值会溢出。符号位溢出会导致数的正负发生改变，最高位的溢出会导致最高位丢失。

```c
#include <stdio.h>

int main()
{
	char ch; // -128 到 127

	// ------- 符号位溢出会导致数的正负发生改变 ----------
	ch = 0x7f + 2; // 127+2
	printf("%d\n", ch);
	//	 0111 1111
	// +2 后 1000 0001，这是负数补码，其原码为 1111 1111，结果为-127

	// -------- 最高位的溢出会导致最高位丢失 -------------
	unsigned char ch2; // 0 到 255
	ch2 = 0xff+1; // 255+1
	printf("%u\n", ch2);
	//	  1111 1111
	// +1 后 10000 0000， char 只有 8 位最高位的溢出，结果为 0000 0000，十进制为 0

	return 0;
}
```

## 浮点型

实型变量也可以称为浮点型变量，浮点型变量是用来存储小数数值的，在C语言中， 浮点型变量分为两种： 单精度浮点数(float)、 双精度浮点数(double)， 但是double型变量所表示的浮点数比 float 型变量更精确。

- **浮点类型（IEEE 754）**

| 类型        | 存储大小 | 值范围                | 精度      |
| :---------- | :------- | :-------------------- | :-------- |
| float       | 4 字节   | -3.4E-38  - 3.4E+38    | 6 位小数  |
| double      | 8 字节   | -1.8E-308 - 1.8E+308   | 15 位小数 |
| long double | 16 字节  | -1.2E-4932 - 1.2E+4932 | 19 位小数 |


不以 f 结尾的常量是 double 类型，以 f 结尾的常量(如3.14f)是 float 类型。

```c
#include <stdio.h>

int main(){
	// 传统方式赋值
    float a = 3.14f; //  或3.14F
    float b = 1.;
    float c = 1.f;
    
    printf("%f \n", a); // 3.140000
    printf("%f \n", b); // 1.000000
    printf("%f \n", c); // 1.000000
    
    double d;
    d = 3.14;
    double e = .1;

    printf("%lf \n", d); // 3.140000
    printf("%lf \n", e); // 0.100000

	// 科学法赋值
	a = 3.2e3f; // 3.2*1000 = 32000，e 可以写 E
	printf("a1 = %f\n", a);

	a = 100e-3f; // 100*0.001 = 0.1
	printf("a2 = %f\n", a);

	// 十六进制小数
    // 1.125 * 2^10
    float f5 = 0x1.2p10;
    printf("%f \n", f5); // 1152.000000
    printf("%.2f \n", f5); // 1152.00

	a = 3.1415926f; // 保留小数点后 6 位
	printf("a3 = %f\n", a); // 结果为3.141593

	return 0;
}
```

## 类型转换

不同类型数据之间进行混合运算时必然涉及到类型的转换，转换的方法有两种：

- 自动转换(隐式转换)：遵循一定的规则，由编译系统自动完成。
- 强制类型转换：把表达式的运算结果强制转换成所需的数据类型。

类型转换的原则：占用内存字节数少(值域小)的类型，向占用内存字节数多(值域大)的类型转换，以保证精度不降低。

<img style="height:250px;weigh:250px" src="/docs/C/Basics/04-类型装换.png"  alt="类型装换"/>

### 隐式类型转换

```c
#include <stdio.h>

int main()
{
	int num = 5;
	printf("s1=%d\n", num / 2);
	printf("s2=%lf\n", num / 2.0);

	return 0;
}
```

### 强制类型转换

```c
#include <stdio.h>

int main()
{
	float x = 0;
	int i = 0;
	x = 3.6f;

	i = x;			// x为实型, i 为整型，直接赋值会有警告
	i = (int)x;		// 使用强制类型转换

	printf("x=%f, i=%d\n", x, i);

	return 0;
}
```