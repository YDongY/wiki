---
title: 05-进制与存储
description: 
published: true
date: 2021-02-21T13:37:19.470Z
tags: 
editor: undefined
dateCreated: 2021-02-21T13:23:46.963Z
---

# 进制与存储

{{< details title="要点回顾：" open=true >}}

1. 进制转换
2. 计算内部只有二进制，且数值采用补码表示
3. 大端模式：高字节放低地址，低字节放高地址
4. 小端模式：高字节放高地址，低字节放低地址

{{< /details >}}

## 进制

- 十进制（Decimal）
- 八进制（Octal）
- 二进制（Binary）
- 十六进制（Hexadecimal）

### 任意进制转十进制

一个 R 进制数：$`k_{3}k_{2}k_{1}k_{0}.s_{1}s_{2}s_{3}`$ 转十进制

$$k_{3}*R^3 + k_{2}*R^2 + k_{1}*R^1 + k_{0}*R^0 + s_{1}*R^{-1} + s_{2}*R^{-2} + s_{3}*R^{-3}$$

### 十进制转任意进制

- 整数转换：除 R 取余法（bottom-top）
- 小数转换：乘 R 取整法（top-bottom）

### 代码书写

```c
int decimal = 24; // 十进制
int hex = 0x2B; // 十六进制
int binary = 024; // 八进制

// C 语言标准不支持二进制表示，GCC 编译器支持
int binary = 0b101010; // 二进制

printf("十进制：%d",20); // 20
printf("十进制：%i",20); // 20
printf("八进制：%o",20); // 24
printf("十六进制：%x",20); // 14
```

## 计算机内存数值存储方式

### 存储单位

- 1字 = 2B
- 1KB = 1024B = 2^10B
- 1MB = 1024KB = 2^20B
- 1GB = 1024MB = 2^30B

### 变量内存地址

由于计算机只能识别 0 和 1 ，所以每一个字节中的数据都是以二进制形式存储的。一个字节包含 8 个二进制位，每一个二进制位存储一个 0 或 1.

1Byte = 8bit ,1B = 8b

```c
#include <stdio.h>

int main(int argc, char const *argv[])
{

    int i1 = 10;
    int i2 = 20;

    // 查看内存地址，变量首字节的内存地址
    printf("%p \n",&i1); // 0x7fffb3da3468
    printf("%p \n",&i2); // 0x7fffb3da3464

    // 先声明的 i1 内存地址大，后声明的 i2 内存地址小
}

----------------------------------------------
| 变量 |   内存地址    |         字节           |
----------------------------------------------
|     |0x7fffb3da3464|  |  |  |  |  |  |  |  |  \
|     |0x7fffb3da3465|  |  |  |  |  |  |  |  |   \
| i2  |0x7fffb3da3466|  |  |  |  |  |  |  |  |   / 32bit
|     |0x7fffb3da3467|  |  |  |  |  |  |  |  |  /
----------------------------------------------
|     |0x7fffb3da3468|  |  |  |  |  |  |  |  |  \
|     |0x7fffb3da3469|  |  |  |  |  |  |  |  |   \
| i1  |0x7fffb3da346A|  |  |  |  |  |  |  |  |   / 32bit
|     |0x7fffb3da346B|  |  |  |  |  |  |  |  |  /
----------------------------------------------
```

### 原码、反码、补码

在计算机中，数值一律采用补码来表示和存储，原因是：①统一了零的编码，②将符号位和其它位统一处理，③将减法运算转变为加法运算，④两个用补码表示数相加时，最高位符号位如果有进位，则被舍弃

```c
// 原码

 有符号数   符号位        数值位
----------------------------------------------
| +11   |   0    | 0 | 0 | 0 | 1 | 0 | 1 | 1 |
----------------------------------------------
| -11   |   1    | 0 | 0 | 0 | 1 | 0 | 1 | 1 |
----------------------------------------------

// 反码
// - 正数反码：和原码一样
// - 负数反码：原码按位取反

----------------------------------------------
| +11   |   0    | 0 | 0 | 0 | 1 | 0 | 1 | 1 |
----------------------------------------------
| -11   |   1    | 1 | 1 | 1 | 0 | 1 | 0 | 0 |
----------------------------------------------

// 补码
// - 正数补码：和原码一样
// - 负数补码：反码末位+1
----------------------------------------------
| +11   |   0    | 0 | 0 | 0 | 1 | 0 | 1 | 1 |
----------------------------------------------
| -11   |   1    | 1 | 1 | 1 | 0 | 1 | 0 | 1 |
----------------------------------------------
```

### 大小端模式

决定字节数据的字节存储顺序

```c
// 整数的补码表示

  高字节                                 低字节
-------------------------------------------------
| 0001 0001 | 0010 0010 | 0100 0100 | 1000 1000 |
-------------------------------------------------

// -------------- 大端模式 -----------------------
// 高字节放低地址，低字节放高地址

------------------------------------------------
|   内存地址    |       字节                     |
------------------------------------------------
|0x7fffb3da3464| 0 | 0 | 0 | 1 | 0 | 0 | 0 | 1 | 高字节
|0x7fffb3da3465| 0 | 0 | 1 | 0 | 0 | 0 | 1 | 0 |   |
|0x7fffb3da3466| 0 | 1 | 0 | 0 | 0 | 1 | 0 | 0 |   |
|0x7fffb3da3467| 1 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 低字节
------------------------------------------------

// -------------- 小端模式 -----------------------
// 高字节放高地址，低字节放低地址

------------------------------------------------
|   内存地址    |       字节                     |
------------------------------------------------
|0x7fffb3da3464| 1 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 低字节
|0x7fffb3da3465| 0 | 1 | 0 | 0 | 0 | 1 | 0 | 0 |   |
|0x7fffb3da3466| 0 | 0 | 1 | 0 | 0 | 0 | 1 | 0 |   |
|0x7fffb3da3467| 0 | 0 | 0 | 1 | 0 | 0 | 0 | 1 | 高字节
------------------------------------------------
```