---
title: 字段属性
description: 
published: true
date: 2021-03-21T16:36:43.634Z
tags: 
editor: markdown
dateCreated: 2021-03-21T16:36:43.634Z
---

# null

默认值为 False ，此时保存模型时，Django 会在数据库的对应字段中保存空。

对于文本型字段，尽可能不使用 null 属性，因为当使用默认值 null 时，数据库中就可能出现两种空数据： NULL 和空字符串，而 Django 默认使用空字符串

# blank

默认为 False，如果一个字段有 blank=True，表单验证将允许输入一个空值。如果一个字段有 blank=False，则该字段为必填字段

# choices

属性值为一个可迭代对象，如列表或者元组，迭代对象的每个成员包括两个字符串。当字段设置了 choices 属性时，字段在网页中将会以下拉列表的形式显示。

列表或元组的第一个值将作为字段值保存到数据库中，第二个值用于提高字段的可读性。使用 `get_FOO_display()` 方法可以获取第二个值

```python
class Student(models.Model):
    FRESHMAN = 'FR'
    SOPHOMORE = 'SO'
    JUNIOR = 'JR'
    SENIOR = 'SR'
    GRADUATE = 'GR'
    YEAR_IN_SCHOOL_CHOICES = [
        (FRESHMAN, 'Freshman'),
        (SOPHOMORE, 'Sophomore'),
        (JUNIOR, 'Junior'),
        (SENIOR, 'Senior'),
        (GRADUATE, 'Graduate'),
    ]
    year_in_school = models.CharField(
        max_length=2,
        choices=YEAR_IN_SCHOOL_CHOICES,
        default=FRESHMAN,
    )
```

![choices-1.png](/assets/web框架/django/字段属性/choices-1.png)

```python
MEDIA_CHOICES = [
    ('Audio', (
        ('vinyl', 'Vinyl'),
        ('cd', 'CD'),
    )
     ),
    ('Video', (
        ('vhs', 'VHS Tape'),
        ('dvd', 'DVD'),
    )
     ),
    ('unknown', 'Unknown'),
]


class GroupChoice(models.Model):
    group_choice_field = models.CharField(max_length=2, choices=MEDIA_CHOICES, default='Audio')
```

![choices-2.png](/assets/web框架/django/字段属性/choices-2.png)

```python
class GroupChoice2(models.Model):
    group_choice_field = models.CharField(max_length=7, blank=True, choices=MEDIA_CHOICES,
                                          default='Audio')
```

![choices-3.png](/assets/web框架/django/字段属性/choices-3.png)

```python
MEDIA_CHOICES = [
    (None, 'Please Select Media'),
    ('Audio', (
        ('vinyl', 'Vinyl'),
        ('cd', 'CD'),
    )
     ),
    ('Video', (
        ('vhs', 'VHS Tape'),
        ('dvd', 'DVD'),
    )
     ),
    ('unknown', 'Unknown'),
]
```

![choices-4.png](/assets/web框架/django/字段属性/choices-4.png)

# default

设置字段默认值。属性值可以是字符串也可以是方法。默认值不可以是可变对象，如：列表 

# help_text

HTML 元素的提示文本，在文本中可以使用 HTML 标记。

例如：

```python
help_text = "Please select your <em>favorite</em> media"


class GroupChoice(models.Model):
    group_choice_field = models.CharField(max_length=7, choices=MEDIA_CHOICES, default='Audio',help_text=help_text)
```

![help_text.png](/assets/web框架/django/字段属性/help_text.png)

# primary_key

将字段设置为数据表主键。如果模型中任何字段都不包含 `primary_key=True` 属性，Django 会自动添加一个 AutoField 来保存主键。

primary_key=True 意味着 null=False 和 unique=True。一个对象只允许有一个主键。

主键永远是只读的，当修改一个模型对象的主键后，如果保存将会在数据库中创建一个新对象

# unique

当宇段的 unique 属性设置为 True 时，该字段的所有值在整张数据表中不能重复，每一行数据都必须有唯一的字段值

如果你试图保存一个在 unique 字段中存在重复值的模型，模型的 save() 方法将引发 `django.db.IntegrityError`。

# verbose_name

verbose_name 属性类似于字段的说明。除了 ForeignKey， ManyToManyField 和 OneToOneField，其他宇段类型都包含一个默认的 verbose_name 属性，如果未指定该参数值，Django 会自动使用字段的属性名作为该参数值，并且把下划线转换为空格。

```python
first_name = models.CharField("person's first name", max_length=30)
```

ForeignKey、ManyToManyField、OneToOneField 三种字段类型要求第 一个参数必须是模型类，因此必须使用 `verbose_name` 关键字

```python
key= models.ForeignKey(Question, verbose_name=' Foreign key')
```

# 其他

| 字段选项           | 描述                                                         |
| ------------------ | ------------------------------------------------------------ |
| `db_column`        | 要使用的数据库列名。如果没有给出列名，Django 将使用**字段名**。 |
| `db_index`         | `db_index=True`为该字段创建数据库索引。                      |
| `db_tablespace`    | 如果这个字段有索引，那么要为这个字段的索引使用的 [数据库表空间](https://docs.djangoproject.com/zh-hans/3.1/topics/db/tablespaces/) 的名称。默认是项目的 [`DEFAULT_INDEX_TABLESPACE`](https://docs.djangoproject.com/zh-hans/3.1/ref/settings/#std:setting-DEFAULT_INDEX_TABLESPACE) 设置（如果有设置），或者是模型的 [`db_tablespace`](https://docs.djangoproject.com/zh-hans/3.1/ref/models/options/#django.db.models.Options.db_tablespace) （如果有）。如果后端不支持索引的表空间，则忽略此选项。 |
| `editable`         | 如果是 `False`，该字段将不会在管理或任何其他`ModelForm`中显示。在模型验证中也会跳过。默认为 `True`。 |
| `error_messages`   | 覆盖该字段引发的默认消息。传入一个与你想覆盖的错误信息相匹配的键值的字典。 |
| `unique_for_date`  | 将其设置为 `DateField`或 `DateTimeField`的名称，要求该字段的日期字段值是唯一的。 |
| `unique_for_month` | 像 `unique_for_date`一样，但要求字段对月份是唯一的           |
| `unique_for_year`  | 同上                                                         |
| `validators`       | 要为该字段运行的验证器列表。                                 |
