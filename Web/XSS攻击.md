---
title: XSS 攻击
description: 
published: true
date: 2021-03-24T06:30:05.682Z
tags: 
editor: markdown
dateCreated: 2021-03-24T06:29:43.819Z
---

# XSS 攻击

XSS（Cross Site Script），跨站脚本攻击。是指恶意攻击者才存在 XSS 漏洞的网站页面插入一段恶意的 JS 代码，当用户浏览该网页时会自动执行嵌入在 Web 页面，从而达到恶意攻击的目的。

比如：黑客在存在 XSS 漏洞的网页插入一段获取用户 Cookie 的 JS 代码，当其他用户浏览该网页时，会执行代码并把登录的用户 Cookie 发送给黑客，这样黑客具有了该用户的相同权限，进而恶意操作。

# XSS 漏洞分类

- 反射型
- 存储型
- DOM 型

## 反射型

攻击者在 URL 插入恶意 JS 代码，服务端将 URL 中的代码输出到页面上，攻击者将带有恶意代码的 URL 发送给用户，用户打开后受到 XSS 攻击

常用漏洞：

- 搜索关键词，闭合标签，导致页面出现关键词的位置标签失效，进而插入恶意的 JS 代码。

## 存储型

攻击者在存在 XSS 漏洞的 Web 页面出入恶意 JS 代码，服务端将数据存储数据库，当访问者访问到该页面是，服务器就会从数据库查询数据加载到 Web 页面，导致恶意代码的执行，达到攻击的目的

常用漏洞：

- 留言评论
- 标签
- 标题
- 富文本内容

## DOM 型

攻击者在 URL 中插入恶意 JS 代码，前端页面直接从 URL 中获取代码并输出到页面，导致代码执行，攻击者将带有恶意代码的 URL 发送给用户，用户打开后受到 XSS 攻击。

常用漏洞：

- 搜索关键字回显，前端直接通过 JS 代码获取关键词，且不作处理直接回显在页面，不经过后端，攻击者可以搜索关键词插入恶意的的代码，当回显在页面时就会被执行。

# XSS 漏洞修复

- 设置 Cookie httponly，不允许 JS 代码获取
- 白名单过滤用户输入的恶意字符